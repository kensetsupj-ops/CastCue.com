# UI/UX要件定義 v1.0（Figma風レイアウト準拠）
**目的**：本プロダクトのUIを「洗練・読みやすさ・操作の一貫性」で設計する。Figmaホーム画面のような“白地＋カード＋太め見出し＋余白広め”のビジュアル言語を採用。

**対象**：Web（Next.js 15／TypeScript／Tailwind／shadcn/ui）。モバイル優先、デスクトップ最適化。

---

## 1. デザイン原則（5つ）
1. **Clarity**：情報密度は中。1画面3〜5ブロックに集約、説明文は最長80字。
2. **Hierarchy**：見出し・カード・ボタンの階層を明確化。視線誘導は左→右、上→下。
3. **Consistency**：余白・角丸・影・配色・フォーカスリングはトークンで統一。
4. **Forgiveness**：取り消し／再実行、ドラフト保存、確認モーダル、Undoトースト。
5. **Accessibility**：コントラスト比 AA（本文4.5:1、見出し3:1）、キーボード操作100%。

---

## 2. タイポグラフィ
- **日本語本文**：`Noto Sans JP`（400/500/700）
- **欧文UI**：`Inter`（400/600/700）
- **フォールバック**：`system-ui, -apple-system, Segoe UI, Roboto, Arial`
- **スケール（rem）**
  - Display: 2.25（/34px）
  - H1: 1.875（/30px）
  - H2: 1.5（/24px）
  - H3: 1.25（/20px）
  - Body: 1.0（/16px）
  - Small: 0.875（/14px）
  - Caption/Meta: 0.75（/12px）
- **行間**：見出し1.2、本文1.6。文字間：和文0、欧文-1%〜0%。
- **使用ルール**：
  - 見出しは太字（700）、本文は400、UIラベルは500。
  - 長文は小見出し（H3）を12〜16行ごとに挿入。

---

## 3. カラーパレット（WCAG AA対応）
- **Brand**
  - Primary: `#4F46E5`（Indigo 600）
  - Primary-hover: `#4338CA`
  - Secondary: `#10B981`（Emerald 500）
- **Neutral**
  - Ink: `#0F172A`（本文色）
  - Sub: `#475569`（補助テキスト）
  - Border: `#E2E8F0`
  - BG: `#F8FAFC`
  - Surface: `#FFFFFF`
- **Semantic**
  - Success `#16A34A`／Warning `#F59E0B`／Danger `#EF4444`／Info `#2563EB`
- **使用比率**：Neutral 70%、Primary 20%、Accent（Secondary/semantic）10%
- **状態色**：Disabled text `#94A3B8`、Disabled bg `#F1F5F9`、Focus ring `#A5B4FC`（2px）

---

## 4. レイアウト＆スペーシング
- **グリッド**：
  - Desktop ≥1280px：12カラム、ガター24px、マージン32px
  - Tablet 768–1279px：8カラム、ガター20px、マージン24px
  - Mobile ≤767px：4カラム、ガター16px、マージン16px
- **コンテナ幅**：sm 640／md 768／lg 1024／xl 1280／2xl 1440
- **スペーシングスケール**（px）：4, 8, 12, 16, 20, 24, 32, 40, 48, 64, 80
- **角丸**：xs 6, sm 10, md 14, lg 20（カード=14、ボタン=10、入力=10）
- **影（Elevation）**：
  - 0: none
  - 1: `0 1px 2px rgba(0,0,0,0.06)`（カード）
  - 2: `0 4px 12px rgba(0,0,0,0.10)`（モーダル）
- **ステート層**：BG → Surface → Card → Popover/Dropdown → Modal/Drawer → Toast

---

## 5. アイコン&イメージ
- **Icon**：`lucide-react`、サイズ 16/20/24px。塗り無し、線幅 1.75。
- **アバター**：32px円形（半径＝16）。
- **サムネイル**：アスペクト比 16:9、`object-cover`。

---

## 6. モーション（最小限で上品に）
- **デュレーション**：Micro 120ms、UI遷移 200ms、モーダル 240ms。
- **Easing**：`cubic-bezier(0.2, 0.8, 0.2, 1)`（標準）、`ease-out`（カードhover）。
- **ルール**：出現はフェード＋5px上方向、解除はフェードアウト。モーション障害設定では無効化。

---

## 7. コンポーネント要件
> shadcn/ui をベースにし、トークンで上書き。各コンポーネントは **Default / Hover / Focus / Active / Disabled / Error** の状態を定義。

### 7.1 ナビゲーション
- **トップバー**：左にロゴ、中央に検索（Cmd/⌘Kショートカット）、右に通知・ヘルプ・アカウントメニュー。
- **サイドバー**：アイコン＋ラベル、幅 272px、スクロール固定。選択中アイテムにPrimary 10%の下地。
- **パンくず**：最大3階層で折返し禁止。モバイルは省略記号へ短縮。

### 7.2 検索・フィルタ
- **グローバル検索**：モーダル（Cmd/⌘K）。タイプアヘッド、最近の検索、キーボード操作対応。
- **リストフィルタ**：タグチップ、ドロップダウン、期間プリセット（7/30/90日）。「この条件で保存」ボタン。

### 7.3 入力系
- **TextField**：ラベル上、説明文下。エラー時 `Danger 600`＋ヘルプ文。必須はラベル末尾`*`。
- **Select/Combobox**：検索可能、最大6件スクロール、チェックマーク選択。
- **DatePicker**：単日・範囲。週開始=月曜。無効日グレーアウト。
- **Stepper/Wizard**：上部水平3〜5ステップ。ドラフト保存、前後移動可能。

### 7.4 表示系
- **Card**：ヘッダ（タイトル/アクション）、ボディ、フッタ（補助情報）。影=Elevation1。
- **Table**：固定ヘッダ、列リサイズ、並べ替え、バルク選択、ページネーション（25/50/100）。
- **Empty State**：アイコン＋1行説明＋Primaryボタン。トーンはSub色。
- **Badge/Tag**：小文字、角丸10、色はSemanticに準拠。
- **Toast**：右上、4秒でフェード。Undoボタン可。

### 7.5 フィードバック
- **ローディング**：スケルトン（高さ16〜24の灰バー）or スピナー。
- **エラー**：見出し「問題が発生しました」、再試行、サポートリンク。
- **確認**：重要操作は2ボタン（キャンセル／実行）。実行ボタンはDangerまたはPrimary。

---

## 8. 画面テンプレート（レイアウト定義）
### 8.1 ホーム／ダッシュボード
- **ヒーロー**：左に主要CTA、右に最近の活動。
- **ウィジェット**：3〜4枚のカード（KPI、最近閲覧、ドラフト、チュートリアル）。
- **リソース**：水平カルーセル（カード3枚表示）。

### 8.2 一覧＋詳細（Master-Detail）
- **左**：フィルタ＋リスト（無限スクロール）。
- **右**：詳細カード（タブ：概要／履歴／添付／コメント）。
- **選択なし**：Empty Stateを表示。

### 8.3 作成ウィザード
- **ステップ**：基本情報 → 内容 → 確認 → 完了。
- **バリデーション**：リアルタイム、次へ進むには必須項目充足。
- **ヘルプ**：各ステップ右カラムにTip。

### 8.4 設定
- サイドタブ（プロフィール／通知／セキュリティ／組織／課金）。
- 危険操作（削除等）は専用Dangerセクション。

### 8.5 認証
- **ログイン**：ロゴ、フォーム、SSOボタン。成功後は直近ページへ。
- **初回導線**：3カードで主要機能を紹介。

---

## 9. 文言・マイクロコピー
- 文体は「です・ます」。CTAは動詞から（例：保存する、共有する）。
- エラーは原因＋対処を1文で。例：「ネットワークに接続できません。再試行するか、数分後にお試しください。」
- プレースホルダーは例示に徹し、指示文はラベルで表現。

---

## 10. アクセシビリティ要件
- タブ順序は視覚順に一致。
- フォーカスリング2px、色は`#A5B4FC`。
- タップ領域44×44px以上。
- スクリーンリーダー用ラベル（aria-label／aria-describedby）。

---

## 11. 非機能要件（UI観点）
- **初回TTI**：≤ 2.5s（4G相当）。画像は`<img loading="lazy">`。
- **CLS**：≤ 0.1。骨組み先描画。
- **i18n**：日本語基準、英語準備（`en`翻訳キー設計）。
- **ダークモード**：V2で対応、トークンで切替可能に設計。

---

## 12. Figmaファイル構成
- **Pages**：`00 Foundations`／`01 Components`／`02 Templates`／`03 Screens`／`99 Playground`
- **Variables**：Color, Typography, Radius, Shadow, Spacing。
- **Libraries**：コンポーネント公開、バージョンタグ `v1.0`。

---

## 13. 実装マッピング（Tailwind／shadcn）
```ts
// tailwind.config.ts（抜粋）
export default {
  theme: {
    container: { center: true, padding: '16px' },
    extend: {
      colors: {
        primary: { DEFAULT: '#4F46E5', foreground: '#FFFFFF' },
        secondary: { DEFAULT: '#10B981' },
        neutral: {
          ink: '#0F172A', sub: '#475569', border: '#E2E8F0', bg: '#F8FAFC', surface: '#FFFFFF'
        },
        success: '#16A34A', warning: '#F59E0B', danger: '#EF4444', info: '#2563EB'
      },
      borderRadius: { xs: '6px', sm: '10px', md: '14px', lg: '20px' },
      boxShadow: {
        card: '0 1px 2px rgba(0,0,0,0.06)',
        modal: '0 4px 12px rgba(0,0,0,0.10)'
      },
      fontFamily: { sans: ['Inter', 'Noto Sans JP', 'system-ui'] },
    }
  }
}
```

---

## 14. 受け入れ基準（UIレビュー・チェックリスト）
- [ ] タイポがスケールに準拠、本文16px以上
- [ ] 主要CTAは1画面1つ（最大2つ）
- [ ] コントラストAAを満たす
- [ ] フォーカス可能要素のキーボード操作OK
- [ ] モバイル幅375pxで崩れない
- [ ] 空状態／エラー／ローディングの3状態を実装
- [ ] 表の列幅・並べ替え・ページネーションが機能
- [ ] アイコンサイズと線幅がガイドに一致

---

## 15. 今回スコープ外（明確化）
- 高度グラフ、カスタムダッシュ編集、テーマカスタマイズUI、完全オフライン対応。

---

## 16. 次アクション
1. Figmaで`00 Foundations`をVariables化（色・余白・影・角丸）。
2. `01 Components`でButton/Input/Card/Table/Modal/Toast/Sidebar/Searchを最小セットで作成。
3. `02 Templates`にダッシュボード／一覧＋詳細／作成ウィザードを配置。
4. 実装チームはtailwind.configのトークンを適用し、shadcn/uiを同名トークンで上書き。

